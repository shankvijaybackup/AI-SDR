# Deploy AI SDR to Render (Free Tier)

## Step 1: Set Up Free PostgreSQL on Neon

1. Go to https://neon.tech and sign up (free)
2. Create a new project called `ai-sdr`
3. Copy the connection string (looks like: `postgresql://user:pass@ep-xxx.us-east-2.aws.neon.tech/neondb?sslmode=require`)
4. **Save this for Step 3**

---

## Step 2: Deploy to Render

### Option A: One-Click Deploy (Recommended)
1. Go to https://render.com/deploy
2. Connect your GitHub account
3. Select repository: `shankvijaybackup/AI-SDR`
4. Render will auto-detect `render.yaml` and create both services

### Option B: Manual Deploy
1. Go to https://dashboard.render.com
2. Click "New" → "Web Service"
3. Connect to `shankvijaybackup/AI-SDR`

**For Next.js App:**
- Name: `ai-sdr-app`
- Root Directory: `app`
- Build Command: `npm install && npx prisma generate && npm run build`
- Start Command: `npm start`

**For Express Backend:**
- Name: `ai-sdr-backend`
- Root Directory: `backend`
- Build Command: `npm install`
- Start Command: `node server.js`

---

## Step 3: Set Environment Variables

After deployment, go to each service → "Environment" tab and add:

### ai-sdr-app (Next.js)
```
DATABASE_URL=<your-neon-connection-string>
JWT_SECRET=<auto-generated-or-create-one>
NEXT_PUBLIC_APP_URL=https://ai-sdr-app.onrender.com
NEXT_PUBLIC_BACKEND_URL=https://ai-sdr-backend.onrender.com
BACKEND_API_URL=https://ai-sdr-backend.onrender.com
SENDGRID_API_KEY=<your-sendgrid-key>
FROM_EMAIL=notifications@atomicwork.com
OPENAI_API_KEY=<your-openai-key>
```

### ai-sdr-backend (Express)
```
PORT=10000
FRONTEND_ORIGIN=https://ai-sdr-app.onrender.com
PUBLIC_BASE_URL=https://ai-sdr-backend.onrender.com
OPENAI_API_KEY=<your-openai-key>
TWILIO_ACCOUNT_SID=<your-twilio-sid>
TWILIO_AUTH_TOKEN=<your-twilio-token>
TWILIO_PHONE_NUMBER=<your-twilio-number>
ELEVEN_API_KEY=<your-elevenlabs-key>
ELEVEN_VOICE_ID_MALE=<voice-id>
ELEVEN_VOICE_ID_FEMALE=<voice-id>
```

---

## Step 4: Initialize Database

After the app deploys, run Prisma migrations:

1. In Render dashboard, go to `ai-sdr-app` service
2. Click "Shell" tab
3. Run: `npx prisma migrate deploy`

---

## Step 5: Update Twilio Webhook

Update your Twilio phone number webhook URL to:
```
https://ai-sdr-backend.onrender.com/voice
```

---

## Free Tier Limits

- **Render**: Services sleep after 15 min inactivity (first request takes ~30s to wake)
- **Neon**: 3GB storage, auto-suspend after 5 min inactivity
- **Tip**: Use a service like UptimeRobot to ping your app every 14 minutes to keep it awake

---

## Troubleshooting

**Build fails?**
- Check logs in Render dashboard
- Ensure `package.json` has all dependencies

**Database connection error?**
- Verify `DATABASE_URL` is set correctly
- Ensure `?sslmode=require` is in the connection string

**CORS errors?**
- Verify `FRONTEND_ORIGIN` matches the actual frontend URL
